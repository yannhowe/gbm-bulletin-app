{% load staticfiles %}
{% load humanize %}
<h2 class="text-center">Weekly Summary -
    {{ weeklysummary.date }}</h2>
<div class="post-preview">
    <p>Giving through
        {{ building_fund_received.date|date:"j M, o" }}
        was
        <strong>${{building_fund_received_ytd|floatformat:"0"|intcomma}}</strong>
        out of
        <strong>${{building_fund_pledged_ytd|floatformat:"0"|intcomma }}</strong>
        pledged year to date which puts us
        {{ahead_or_behind}}
        by about
        <strong>${{building_pledge_received_difference|floatformat:"0"|intcomma}}</strong>. We'll need to receive
        <strong>${{building_goal_received_difference|floatformat:"0"|intcomma}}</strong>
        by the end of the year to meet our building fund goal of
        <strong>${{building_goal|floatformat:"0"|intcomma}}</strong>
        this year.
    </p>

    <div class="progress">
        <div class="progress-bar" role="progressbar" aria-valuenow="{{building_goal_received_percent}}" aria-valuemin="0" aria-valuemax="100" style="min-width: 2em; width: 2%;">
            {{building_goal_received_percent|floatformat:"0"}}%
        </div>
    </div>
    <br/>

    <script>
        $(function() {
            $('[data-toggle="tooltip"]').tooltip({trigger: 'manual'}).tooltip('show');
        });

        // $( window ).scroll(function() { if($( window ).scrollTop() > 10){  // scroll down abit and get the action
        $(".progress-bar").each(function() {
            each_bar_width = $(this).attr('aria-valuenow');
            $(this).width(each_bar_width + '%');
        });
        //  } });
    </script>
    <script src="{% static 'newswire/js/jquery.sparkline.min.js' %}"></script>
    <script type="text/javascript">
        /* <![CDATA[ */
        $(function() {
            /** This code runs when everything has been loaded on the page */
            /* Inline sparklines take their values from the contents of the tag */
            $('.inlinesparkline').sparkline();

            /* Sparklines can also take their values from the first argument passed to the sparkline() function */
            var myvalues = [
                245,
                235,
                233,
                240,
                248,
                242,
                245
            ];
            /* The second argument gives options such as specifying you want a bar chart */
            $('.dynamicbar').sparkline(myvalues, {
                type: 'line',
                barColor: 'green'
            });

        });
        /* ]]> */
    </script>

    <h3>Attendance</h3>
    <p>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
        <script src="http://cdn.oesmith.co.uk/morris-0.4.1.min.js"></script>

        <div id="line-example"></div>
        <script>
            Morris.Line({
                element: 'line-example',
                data: [
                    {
                        y: '2016-08-21',
                        a: 230
                    }, {
                        y: '2016-08-14',
                        a: 225
                    }, {
                        y: '2016-08-07',
                        a: 233
                    }, {
                        y: '2016-07-31',
                        a: 245
                    }, {
                        y: '2016-07-24',
                        a: 238
                    }, {
                        y: '2016-07-17',
                        a: 220
                    }, {
                        y: '2016-07-10',
                        a: 210
                    }, {
                        y: '2016-08-18',
                        b: 210
                    }, {
                        y: '2016-08-16',
                        b: 215
                    }, {
                        y: '2016-08-05',
                        b: 213
                    }, {
                        y: '2016-07-30',
                        b: 215
                    }, {
                        y: '2016-07-20',
                        b: 218
                    }, {
                        y: '2016-07-13',
                        b: 203
                    }, {
                        y: '2016-07-11',
                        b: 200
                    }
                ],
                xkey: 'y',
                ykeys: [
                    'a', 'b'
                ],
                xLabels: ["week"],
                labels: [
                    '2016 Attendance', '2015 Attendance'
                ],
                ymin: 'auto 200'
            });
        </script>
    </p>
</p>
</div>
